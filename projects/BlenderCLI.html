<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="title" content="Blender CLI Integration | Lloyd Sanderson | Professional Portfolio">
    <meta name="description" content="">
    <meta name="image" content="https://github.com/lsanderson1.png">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Lloyd Sanderson | Professional Portfolio">
    <meta property="og:url" content="https://lsanderson1.github.io/projects/BlenderCLI.html">
    <meta property="og:title" content="Blender CLI Integration | Lloyd Sanderson | Professional Portfolio">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://github.com/lsanderson1.png">
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/techfolio-theme/skyblue.css">
    <link rel="stylesheet" type="text/css" href="/css/rouge/github.css">
    <!-- Load MathJax if 'mathjax: true' is found in your _config.yml. -->
    
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-MML-AM_CHTML">
    </script>
    

    <title>Blender CLI Integration | Lloyd Sanderson | Professional Portfolio</title>
  </head>
  <body>
  <header class="navbar navbar-expand navbar-light bg-light bg-gradient border-bottom">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">Lloyd Sanderson</a>
    <div class="ms-auto">
      <ul class="navbar-nav mb-2 mb-lg-0">
        <a class="nav-link" href="/#projects">Projects</a>
        <a class="nav-link" href="/#essays">Essays</a>
        <a class="nav-link" href="/resume.html">Resume</a>
      </ul>
    </div>
  </div>
</header>

<div class="container py-4">
  <h1 class="display-4">Blender CLI Integration</h1>
 <h2 id="overview">Overview</h2>
<p>This project is:</p>
<ol>
  <li><strong>A Python socket server</strong> embedded in Blender (v4.2+) that listens on TCP port (default: 5000) for JSON commands.</li>
  <li><strong>A Common Lisp client library</strong> (<code class="language-plaintext highlighter-rouge">blender-ipc.lisp</code> + <code class="language-plaintext highlighter-rouge">blender-cli.lisp</code>) to send commands and an interactive menu.</li>
</ol>

<h2 id="what-is-used-to-execute-this-project">What is used to execute this project</h2>
<ul>
  <li><strong>Blender 4.2+</strong> with Python scripting enabled.</li>
  <li><strong>Common Lisp</strong> with packages:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">usocket</code></li>
      <li><code class="language-plaintext highlighter-rouge">cl-json</code></li>
    </ul>
  </li>
  <li>Network access between Lisp client and Blender (default <code class="language-plaintext highlighter-rouge">127.0.0.1:5000</code>).</li>
</ul>

<h2 id="setup">Setup</h2>
<ol>
  <li><strong>In Blender</strong>
    <ul>
      <li>Open the <code class="language-plaintext highlighter-rouge">blender-python_script_lloyd</code> text file and paste the Python script into the Text Editor.</li>
      <li>Run the script or enable “Register” so it runs on file load.</li>
      <li>
        <p>Confirm console shows:</p>

        <p>Blender socket server listening on 127.0.0.1:5000</p>
      </li>
    </ul>
  </li>
  <li><strong>In Lisp</strong>
    <ul>
      <li>Adjust <code class="language-plaintext highlighter-rouge">*blender-host*</code> and <code class="language-plaintext highlighter-rouge">*blender-port*</code> in <code class="language-plaintext highlighter-rouge">blender-ipc.lisp</code> if needed.</li>
      <li>Load <code class="language-plaintext highlighter-rouge">blender-ipc.lisp</code> then <code class="language-plaintext highlighter-rouge">blender-cli.lisp</code> in your REPL. (or call ‘load’ on top, then C-c C-l on blender-cli.lisp)</li>
      <li>Call <code class="language-plaintext highlighter-rouge">(blender-menu)</code> to access the interactive CLI.</li>
    </ul>
  </li>
</ol>

<h2 id="core-python-functions-action-handlers">Core Python Functions (action handlers)</h2>
<ul>
  <li>
    <p><strong>ping</strong><br />
Health check: replies “Get Pong’d!”</p>
  </li>
  <li>
    <p><strong>create</strong><br />
Create mesh primitives (<code class="language-plaintext highlighter-rouge">cube</code>, <code class="language-plaintext highlighter-rouge">sphere</code>, <code class="language-plaintext highlighter-rouge">cylinder</code>, <code class="language-plaintext highlighter-rouge">torus</code>, <code class="language-plaintext highlighter-rouge">plane</code>) with optional location, size, rotation.</p>
  </li>
  <li>
    <p><strong>translate</strong>, <strong>rotate</strong>, <strong>scale</strong><br />
Move, rotate (degrees), scale objects by given deltas or factors.</p>
  </li>
  <li>
    <p><strong>delete</strong><br />
Remove a named object—or all objects if no name provided.</p>
  </li>
  <li>
    <p><strong>color</strong><br />
Apply a solid RGBA color to an object’s material.</p>
  </li>
  <li>
    <p><strong>rainbow</strong><br />
Create a procedural rainbow material with optional shader type and roughness.</p>
  </li>
  <li>
    <p><strong>emission</strong><br />
Assign an emissive material with color and strength.</p>
  </li>
  <li>
    <p><strong>particles</strong><br />
Add or update a particle system: count, lifetime, velocity, smoke/fire toggles, resolution.</p>
  </li>
  <li>
    <p><strong>light</strong><br />
Add lights (<code class="language-plaintext highlighter-rouge">POINT</code>, <code class="language-plaintext highlighter-rouge">SUN</code>, <code class="language-plaintext highlighter-rouge">SPOT</code>, <code class="language-plaintext highlighter-rouge">AREA</code>) with location, energy, optional angle (°) &amp; blend (0–1) for spot, source color sampling, and optional radius-based light linking.</p>
  </li>
  <li>
    <p><strong>add-camera</strong>, <strong>set-camera</strong><br />
Create and set active camera with location &amp; rotation.</p>
  </li>
  <li>
    <p><strong>get-info</strong><br />
Query object transform and dimensions.</p>
  </li>
  <li>
    <p><strong>material</strong><br />
Assign node-based materials: principled, glass, glossy, metallic, anisotropic, sss, transparent, sheen, wireframe; with color, roughness, anisotropy, scale, radius parameters.</p>
  </li>
  <li>
    <p><strong>animate</strong><br />
Keyframe interpolate location, rotation_euler, or scale between start/end values over frames.</p>
  </li>
</ul>

<h2 id="core-lisp-functions">Core Lisp Functions</h2>
<ul>
  <li><strong>blender-ping</strong></li>
  <li><strong>blender-create</strong> NAME TYPE &amp;key :location :size :rotation</li>
  <li><strong>blender-translate</strong> NAME DX DY DZ</li>
  <li><strong>blender-rotate</strong> NAME RX RY RZ</li>
  <li><strong>blender-scale</strong> NAME SX SY SZ</li>
  <li><strong>blender-color</strong> NAME R G B &amp;optional A</li>
  <li><strong>blender-rainbow</strong> NAME &amp;key :base_type :roughness</li>
  <li><strong>blender-delete</strong> NAME</li>
  <li><strong>blender-particles</strong> NAME &amp;key :count :lifetime :frame-start :frame-end :velocity :location :smoke :fire :resolution-max</li>
  <li><strong>blender-light</strong> NAME TYPE &amp;key :location :energy :source :radius :angle :blend</li>
  <li><strong>blender-add-camera</strong> NAME &amp;key :location :rotation</li>
  <li><strong>blender-set-camera</strong> NAME</li>
  <li><strong>blender-emission</strong> NAME &amp;key :color :strength</li>
  <li><strong>blender-object-info</strong> NAME</li>
  <li><strong>blender-material</strong> NAME TYPE &amp;key :color :roughness :anisotropy :scale :radius</li>
  <li><strong>blender-animate</strong> NAME PROP &amp;key :start-frame :end-frame :start-value :end-value</li>
  <li><strong>blender-menu</strong><br />
Interactive menu driving all above commands.</li>
</ul>

<h2 id="usage-example"><strong>Usage Example</strong></h2>
<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">CL-USER&gt;</span> <span class="p">(</span><span class="nv">blender-menu</span><span class="p">)</span>
<span class="nv">====</span> <span class="nv">BLENDER-CLI</span> <span class="nv">MENU</span> <span class="nv">=====</span>
<span class="nv">Reminder:</span> <span class="nv">Please</span> <span class="nb">open</span> <span class="nv">your</span> <span class="nv">Blender</span> <span class="nv">Host</span> <span class="nb">and</span> <span class="nv">Port</span> <span class="nv">to</span> <span class="nv">connection</span> <span class="nv">before</span> <span class="nv">running</span> <span class="nv">payloads</span>
<span class="mi">1</span><span class="err">)</span> <span class="nv">Ping</span>
<span class="mi">2</span><span class="err">)</span> <span class="nv">Create</span> <span class="nv">Object</span>
<span class="mi">3</span><span class="err">)</span> <span class="nv">Translate</span>
<span class="mi">4</span><span class="err">)</span> <span class="nv">Rotate</span>
<span class="mi">5</span><span class="err">)</span> <span class="nv">Scale</span>
<span class="mi">6</span><span class="err">)</span> <span class="nv">Color</span>
<span class="mi">7</span><span class="err">)</span> <span class="nv">Add</span> <span class="nv">Emission</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">Color</span><span class="p">)</span>
<span class="mi">8</span><span class="err">)</span> <span class="nv">Apply</span> <span class="nv">Material</span>
<span class="mi">9</span><span class="err">)</span> <span class="nv">Add</span> <span class="nv">Animation</span>
<span class="mi">10</span><span class="err">)</span> <span class="nv">Add</span> <span class="nv">Particle</span> <span class="nv">System</span>
<span class="mi">11</span><span class="err">)</span> <span class="nv">Add</span> <span class="nv">Light</span>
<span class="mi">12</span><span class="err">)</span> <span class="nv">Add</span> <span class="nv">Camera</span>
<span class="mi">13</span><span class="err">)</span> <span class="nv">Set</span> <span class="nv">Camera</span>
<span class="mi">14</span><span class="err">)</span> <span class="nv">Delete</span> <span class="nv">Object</span>
<span class="mi">15</span><span class="err">)</span> <span class="nv">Get</span> <span class="nv">Information</span>
<span class="mi">16</span><span class="err">)</span> <span class="nv">Quit</span>

<span class="nv">Choice:</span> <span class="mi">1</span>

<span class="nv">[Blender]:</span>
<span class="nv">Get</span> <span class="nv">Pong</span><span class="ss">'d!</span>

<span class="nv">Choice:</span> <span class="mi">2</span>

<span class="nv">========</span> <span class="nv">CREATING</span> <span class="nv">OBJECT...</span> <span class="nv">==========</span>
<span class="nv">Available</span> <span class="nv">Meshes:</span>

  <span class="nv">Cube</span>  
  <span class="nv">Sphere</span>  
  <span class="nv">Cylinder</span>  
  <span class="nv">Torus</span>  
  <span class="nv">Plane</span>  

<span class="nv">Please</span> <span class="k">type</span> <span class="nv">in</span> <span class="k">the</span> <span class="nv">mesh</span> <span class="nv">you</span> <span class="nv">wish</span> <span class="nv">to</span> <span class="nv">create:</span> <span class="nv">Cube</span>  
<span class="nv">How</span> <span class="nv">many</span> <span class="nv">Cube</span><span class="p">(</span><span class="nv">s</span><span class="p">)</span> <span class="nv">would</span> <span class="nv">you</span> <span class="nv">like</span> <span class="nv">to</span> <span class="nv">create:</span> <span class="mi">1</span>  
<span class="nv">========</span> <span class="nv">Creating</span> <span class="nv">Cube</span> <span class="err">#</span><span class="nv">1...</span> <span class="nv">==========</span>
<span class="nv">Name:</span> <span class="nv">Cube1</span>  
<span class="nv">Location</span> <span class="p">(</span><span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">)</span><span class="err">:</span> <span class="p">(</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">)</span>  
<span class="nv">Size:</span> <span class="mi">9</span>  
<span class="nv">Rotation</span> <span class="p">(</span><span class="nv">Deg</span><span class="p">)</span> <span class="p">(</span><span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">)</span><span class="err">:</span> <span class="p">(</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">)</span>  

<span class="nv">[Blender]:</span>  
<span class="nv">You</span> <span class="nv">created</span> <span class="nv">a</span> <span class="ss">'cube</span><span class="o">'</span> <span class="nv">named</span> <span class="ss">'Cube1</span><span class="o">'</span> <span class="nv">at</span> <span class="nv">[0,</span> <span class="mi">0</span><span class="o">,</span> <span class="nv">0]</span> <span class="nv">with</span> <span class="nv">size</span> <span class="mi">9</span> <span class="nb">and</span> <span class="nv">rotation</span> <span class="nv">[0,</span> <span class="mi">0</span><span class="o">,</span> <span class="nv">0]</span>  

<span class="nv">Check</span> <span class="nv">your</span> <span class="nv">Blender</span> <span class="nv">Scene.</span>

<span class="nv">Choice:</span> <span class="mi">6</span>

<span class="nv">========</span> <span class="nv">APPLYING</span> <span class="nv">COLOR</span> <span class="nv">TO</span> <span class="nv">OBJECT...</span> <span class="nv">==========</span>
<span class="nv">Name:</span> <span class="nv">Cube1</span>  
<span class="nv">Apply</span> <span class="nv">Rainbow?</span> <span class="p">(</span><span class="nv">Y/N</span><span class="p">)</span><span class="err">:</span> <span class="nv">N</span>  
<span class="nv">Solid</span> <span class="nv">Color</span> <span class="p">(</span><span class="nv">r</span> <span class="nv">g</span> <span class="nv">b</span> <span class="p">(</span><span class="nv">alpha</span><span class="p">))</span><span class="err">:</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span><span class="p">)</span>  

<span class="nv">[Blender]:</span>  
<span class="nv">Colored</span> <span class="ss">'Cube1</span><span class="o">'</span> <span class="nv">with</span> <span class="nv">[1,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="nv">1.0]</span>  

<span class="nv">Check</span> <span class="nv">your</span> <span class="nv">Blender</span> <span class="nv">Scene.</span>

<span class="nv">Choice:</span> <span class="mi">8</span>

<span class="nv">========</span> <span class="nv">APPLYING</span> <span class="nv">MATERIAL</span> <span class="nv">TO</span> <span class="nv">OBJECT</span> <span class="nv">==========</span>
<span class="nv">Name:</span> <span class="nv">Cube1</span>  
<span class="nv">Material</span> <span class="nv">Type:</span>

  <span class="nv">Principled</span>  
  <span class="nv">Glass</span>  
  <span class="nv">Glossy</span>  
  <span class="nv">Metallic</span>  
  <span class="nv">Anisotropic</span>  
  <span class="nv">SSS</span> <span class="p">(</span><span class="nv">Subsurface</span> <span class="nv">Scattering</span><span class="p">)</span>  
  <span class="nv">Transparent</span>  
  <span class="nv">Sheen</span>  
  <span class="nv">Wireframe</span>  

<span class="nv">Please</span> <span class="nv">input</span> <span class="k">the</span> <span class="nv">material</span> <span class="nv">you</span> <span class="nv">wish</span> <span class="nv">to</span> <span class="nv">add</span> <span class="nv">to</span> <span class="nv">Cube1:</span> <span class="nv">Glossy</span>  
<span class="nv">Use</span> <span class="nv">existing</span> <span class="nv">object</span> <span class="nv">color?</span> <span class="p">(</span><span class="nv">Y/N</span><span class="p">)</span><span class="err">:</span> <span class="nv">Y</span>  
<span class="nv">Roughness</span> <span class="p">(</span><span class="nv">0.0</span><span class="err">–</span><span class="mf">1.0</span><span class="p">)</span><span class="err">:</span> <span class="mi">0</span>  

<span class="nv">[Blender]:</span>  
<span class="nv">Applied</span> <span class="ss">'glossy</span><span class="o">'</span> <span class="nv">material</span> <span class="nv">to</span> <span class="ss">'Cube1</span><span class="o">'</span>  

<span class="nv">Check</span> <span class="nv">your</span> <span class="nv">Blender</span> <span class="nv">Scene.</span>

<span class="nv">Choice:</span> <span class="mi">14</span>

<span class="nv">========</span> <span class="nv">DELETING</span> <span class="nv">OBJECT...</span> <span class="nv">==========</span>
<span class="nv">Name</span> <span class="nv">to</span> <span class="nb">delete</span> <span class="p">(</span><span class="nb">or</span> <span class="nv">press</span> <span class="nv">Enter</span> <span class="nv">to</span> <span class="nb">delete</span> <span class="nv">ALL</span><span class="p">)</span><span class="err">:</span> <span class="nv">Cube1</span>  

<span class="nv">[Blender]:</span>  
<span class="nv">Deleted</span> <span class="nv">object:</span> <span class="ss">'Cube1</span><span class="o">'</span>  

<span class="nv">Check</span> <span class="nv">your</span> <span class="nv">Blender</span> <span class="nv">Scene</span>

<span class="nv">Choice:</span> <span class="mi">16</span>  
<span class="nv">Goodbye.</span>  
<span class="nv">NIL</span>

<span class="nv">---</span>
</code></pre></div></div>
<p>Download the file links here:</p>

<p><a href="/assets/files/blender-cli.lisp">Blender CLI File</a><br />
<a href="/assets/files/blender-ipc.lisp">Blender IPC File</a><br />
<a href="/assets/files/blender-python-lloyd.txt">Blender-Python Integration and API Source Code</a></p>

</div>

<footer class="navbar navbar-expand navbar-light bg-light bg-gradient border-top">
  <div class="container-fluid">
    <div class="ms-auto">
      <ul class="navbar-nav mb-2 mb-lg-0">
        <small><a class="nav-link" href="https://techfolios.github.io">Made with Techfolios</a></small>
      </ul>
    </div>
  </div>
</footer>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
  </body>
</html>
